<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Profile</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
      <link href="w3.css" rel="stylesheet">
      <style>
      
    .cntr{
      display:flex ;
      align-items:center ;
      justify-content: center ;
      /* align-content: space-around ; */
      flex-wrap:wrap ;
      row-gap: 50px ;
      column-gap: 5px ;
    }
      </style>
  </head>
  <body>

    <h1 class='w3-panel w3-green w3-center'>ADMIN Posts</h1>

    <button id="btng" class="w3-button w3-white w3-border w3-border-blue w3-ripple">Show admin posts</button>
    <br>
    <br>
    <br>

    <div id='all_psts' class='w3-container w3-center cntr' >

    </div>



  </body>
  <script>
  let post ;
  function get_text(){
    dthead =document.getElementById('hdn').value ;
    dtpst = document.getElementById('pst').value ;
    post={ dthead:dthead, dtpst:dtpst }
  }
  function snd(){
    get_text()  ;
    fetch('/ad_adm_info',{
      method: 'POST',
      body: JSON.stringify(post),
      headers: {
        'Content-Type': 'application/json;charset=UTF-8',
      }})
      .then((response) => response.json()).then((data) => {
        console.log('Success:', data);
      })
      .catch((error) => {
        console.error('Error:', error);
      });
  }




  function gtinf(){
    // fetch('/getinfo').then((response) => response.json())
    //   .then((data) => console.log(data));
    rendrPosts(prnt_div) ;
  }
  // function send_req(){
  //   fetch('/addinfo',()=> {
  //   method: 'POST', // or 'PUT'
  //   headers: { 'Content-Type': 'application/json', },
  //   body: JSON.stringify(post),
  // }) .then((response) => response.json()).then((data) => {
  //     console.log('Success:', data); }).catch((error) => {
  //     console.error('Error:', error);
  //   });
  // }
  </script>

  <script>
const prnt_div=document.getElementById('all_psts') ;
function printPosts(objs,container){


  // console.log(objs) ;
  objs.forEach(obj => {
    
  hdngs=obj.hdng ;
  psts=obj.pst ;
    // name=obj.name ;



    // let author = "Posts By: "+name ;
    // nmcnt.append(author) ;

  for(let i = 0; i < hdngs.length; i++){


 let dv=document.createElement('div') ; dv.setAttribute('class','w3-card-4  w3-center') ;
      dv.setAttribute('style','width:50%;') ;
    let hedr = document.createElement('header') ; hedr.setAttribute('class','w3-container w3-blue') ;
    let h = document.createElement('h3') ; 
    hedr.appendChild(h) ;

    let dv2=document.createElement('div') ;dv2.setAttribute('class','w3-container') ;
    let p=document.createElement('p') ; 
    dv2.appendChild(p) ;

    dv.appendChild(hedr) ;
    dv.appendChild(dv2) ;

      h.innerHTML=hdngs[i] ;
      p.innerHTML=psts[i] ;

      prnt_div.appendChild(dv) ;

      let br=document.createElement('br') ;  prnt_div.appendChild(br) ;
      let br1=document.createElement('br') ; prnt_div.appendChild(br1) ;
      let br2=document.createElement('br') ; prnt_div.appendChild(br2) ;
      

    // // console.log(hdngs[i]); console.log(psts[i]);
    // let hdr=document.createElement('h3') ;
    // hdr.append(hdngs[i]) ;
    // let pst=document.createElement('p') ;
    // pst.append(psts[i]) ;
    // container.appendChild(hdr) ;
    // container.appendChild(pst) ;
    }}) ;
  }

async function rendrPosts(container){

  const dta =await fetch("/get_adm_posts")
  const data=await dta.json() ;
  container.innerHTML='' ;

  printPosts(data,container) ;

  // headers=['From/To','From/To','Fare'] ;
  // printTable(data,headers,myTable);

}
</script>

    <!-- <script src="./prfl.js"> </script> -->
  <script>
  // const el=document.getElementById('btn').addEventListener("click",snd,false) ;
  const gtel=document.getElementById('btng').addEventListener("click",gtinf,false) ;
  </script>



</html>

